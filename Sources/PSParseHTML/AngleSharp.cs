using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using AngleSharp;
using AngleSharp.Dom;
//using AngleSharp.Js;

namespace PSParseHTML {
    public class AngleSharp {

        //public static async Task Test() {

        //    string address = "https://www2.asx.com.au/markets/trade-our-cash-market/directory";


        //    IConfiguration config = Configuration.Default
        //        .WithDefaultLoader()
        //        .WithJs();
        //    IBrowsingContext context = BrowsingContext.New(config);

        //    // open document
        //    var document = await context.OpenAsync(address).WaitUntilAvailable();

        //    var numEntries = document.ExecuteScript("document.querySelectorAll('div').length");

        //    string s;
        //    s = "th";

        //    // get list of elements in document that match the selector (or selector group)
        //    IHtmlCollection<IElement> elements = document.QuerySelectorAll(s);

        //    // get the text
        //    IEnumerable<string> elementsText = elements.Select(m => m.TextContent);

        //    // debug dump
        //    Console.WriteLine("MatchedElements = " + elements.Length.ToString());
        //    foreach (string text in elementsText)
        //        Console.WriteLine(text);

        //    Console.WriteLine("DONE");
        //}
    }
}
